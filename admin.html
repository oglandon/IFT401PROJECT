<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Proton Trading</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="adminuserlogin.css">
    </head>
    
    <body>
        <div id="wrapper">
            <header>
                <section id="top_bar">
                    <nav>
                        <ul>
                            <li><a href="index.html"> <img src="protonlogo.jpg" class="logo" alt="Proton Logo"></a></li>
                            <li><a href="about.html">About Us</a></li>
                            <li><a href="watchlist.html">Watchlist</a></li>
                            <li><a href="create.html">Create Account</a></li>
                            <li><a href="admin.html">Admin Login</a></li>
                            <li><a href="user.html">User Login</a></li>
                        </ul>
                    </nav>
                </section>
            </header>

            <div class="admin-login">
                <h2>Insert Admin Credentials.</h2>
                <form id="adminloginform">
                    <label for="email"></label>
                    <input type="text" id="email" name="email" required placeholder="Email">

                    <label for="password"></label>
                    <input type="password" id="password" name="password" required placeholder="Password">

                    <button type="submit">Login</button>
                </form>
            </div>

            <script>
                window.onload = function() {
                    document.getElementById("adminloginform").reset();
                };
            </script>
            <script>
                document.getElementById("adminloginform").addEventListener("submit", async function(event) {
                    event.preventDefault();
            
                    const email = document.getElementById("email").value;
                    const password = document.getElementById("password").value;
            
                    const endpoint = "http://127.0.0.1:8000/user/token";
            
                    try {
                        const response = await fetch(endpoint, {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({ email: email, password: password })
                        });
            
                        if (response.ok) {
             
                            window.location.href = "useraccount.html";
                        } else {
       
                            alert("Login failed: Invalid email or password.");
                        }
                    } catch (error) {
                        console.error("Error:", error);
                        alert("An error occurred while logging in.");
                    }
                });
            </script>